(this["webpackJsonpdaily-journal-react"]=this["webpackJsonpdaily-journal-react"]||[]).push([[0],{16:function(e,t,a){e.exports=a(42)},21:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(3),l=a.n(r),o=(a(21),a(1)),s=c.a.createContext(),i=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),r=a[0],l=a[1],i=Object(n.useState)({}),u=Object(o.a)(i,2),m=u[0],d=u[1],h=function(){return fetch("http://localhost:8088/entries").then((function(e){return e.json()})).then(l)};return c.a.createElement(s.Provider,{value:{entries:r,getEntries:h,addEntry:function(e){return fetch("http://localhost:8088/entries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(h)},deleteEntry:function(e){return fetch("http://localhost:8088/entries/".concat(e.id),{method:"DELETE"}).then(h)},updateEntry:function(e){return fetch("http://localhost:8088/entries/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(h)},getEntryById:function(e){return fetch("http://localhost:8088/entries/".concat(e)).then((function(e){return e.json()})).then(d)},entry:m,setEntry:d,searchEntries:function(e){return fetch("http://localhost:8088/entries?q=".concat(e)).then((function(e){return e.json()})).then(l)}}},e.children)},u=c.a.createContext(),m=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),r=a[0],l=a[1];return c.a.createElement(u.Provider,{value:{moods:r,getMoods:function(){return fetch("http://localhost:8088/moods").then((function(e){return e.json()})).then(l)}}},e.children)},d=a(14),h=a(4),p=function(e){var t=e.entry,a=(e.moods.find((function(e){return e.id===t.moodId})),Object(n.useContext)(s)),r=a.deleteEntry,l=a.getEntryById;return c.a.createElement("section",{className:"entry"},c.a.createElement("div",{dir:"auto",className:"post-preview"},c.a.createElement("a",null,c.a.createElement("h2",{class:"post-title text-capitalize"},null!=t.title&&t.title.length>0?c.a.createElement("span",null,t.title):c.a.createElement("small",null,"No title"),c.a.createElement("button",{className:"btn btn-link text-white",onClick:function(){return function(e){navigator.clipboard.writeText("Copy this text to clipboard"),h.b.dark(e.title+" copied")}(t)}},c.a.createElement("i",{class:"fas fa-copy"}),"Copy")),c.a.createElement("h3",{class:"post-subtitle"},t.content)),c.a.createElement("p",{class:"post-meta"},c.a.createElement("a",{href:"#!"},"Published at"),d(t.diaryDate).format("lll"))),c.a.createElement("hr",{class:"my-4"}),c.a.createElement("div",{className:"d-none"},c.a.createElement("button",{className:"btn btn-danger",onClick:function(){r(t)}},"Delete"),c.a.createElement("a",{target:"_blank",href:"http://localhost:1337/admin/plugins/content-manager/collectionType/application::shredden-pieces.shredden-pieces/"+t.id,className:"btn",onClick:function(){l(t.id)}},c.a.createElement("i",{class:"fa fa-pencil","aria-hidden":"true"}),"Edit")))},E=a(15),f=function(){var e=Object(n.useContext)(s),t=e.entries,a=(e.searchEntries,Object(n.useContext)(u)),r=a.moods,l=(a.getMoods,Object(n.useState)([])),i=Object(o.a)(l,2),m=i[0],d=i[1],h=Object(n.useState)(""),f=Object(o.a)(h,2),b=f[0],g=f[1],y=Object(n.useState)(1),j=Object(o.a)(y,2),v=j[0],O=j[1],x=Object(n.useState)(""),N=Object(o.a)(x,2),k=(N[0],N[1],Object(n.useState)(1)),C=Object(o.a)(k,2),w=C[0],S=C[1],P=Object(n.useState)([]),T=Object(o.a)(P,2),D=T[0],B=T[1],J=Object(n.useState)(!1),_=Object(o.a)(J,2),I=_[0],L=_[1],M=function(){console.log("searchEntires -> term",b),L(!0),E.get("http://167.172.132.44:1337/shredden-pieces/search",{params:{_limit:30,_start:30*(w-1),_q:b,_sort:"diaryDate:DESC"}}).then((function(e){L(!1),d(e.data.pieces),console.log("searchEntires -> res.data.pieces",e.data.pieces),O(e.data.count);for(var a=[],n=1,c=e.data.count/30;n<=c;)a.push(n),n++;B(a),console.log("EntryList -> res",t)}))};return Object(n.useEffect)((function(){M()}),[w,b]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{class:"container px-4 px-lg-5"},c.a.createElement("div",{class:"row pt-4 gx-4 gx-lg-5 justify-content-center"},c.a.createElement("h1",{className:"py-4"},"Total Pieces (",v,")"),c.a.createElement("div",{className:"search-row col-lg-6 col-xs-12 col-sm-12 form-group d-flex"},c.a.createElement("input",{onChange:function(e){return g(e.target.value)},className:"form-control"}),c.a.createElement("button",{onClick:function(){return M()},className:"btn text-white"},"Search")),c.a.createElement("div",{className:"col-12"},c.a.createElement("nav",{className:"overflow-scroll","aria-label":"Page navigation example"},c.a.createElement("ul",{className:"pagination"},c.a.createElement("li",{className:"page-item"},c.a.createElement("a",{onClick:function(){w>1&&S(w-1)},className:"btn btn-link text-white","aria-label":"Previous"},c.a.createElement("span",{"aria-hidden":"true"},"\xab"),c.a.createElement("span",{class:"sr-only"},"Previous"))),D.map((function(e,t){return c.a.createElement("li",{key:e,class:"page-item"},c.a.createElement("a",{className:"btn btn-link text-white "+(e==w?" text-bold":""),onClick:function(){return function(e){S(e),console.log("handlePageClick -> page",e)}(e)}},e))})),c.a.createElement("li",{class:"page-item"},c.a.createElement("a",{onClick:function(){w<D.length&&S(w+1)},className:"btn btn-link text-white","aria-label":"Next"},c.a.createElement("span",{class:"sr-only"},"Next"),c.a.createElement("span",{"aria-hidden":"true"},"\xbb")))))),I&&c.a.createElement("div",{className:"d-flex justify-content-center container text-center margin-auto"},c.a.createElement("div",{class:"loader"})),c.a.createElement("div",{className:"col-md-10 col-lg-8 col-xl-7"+(I?"d-none":"")},c.a.createElement("div",{className:"entries"},m.map((function(e){return c.a.createElement(p,{key:e.id,entry:e,moods:r})})))))))},b=function(){return c.a.createElement("div",{className:"DailyJournal"},c.a.createElement(i,null,c.a.createElement(m,null,c.a.createElement(f,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(41);l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(b,null),c.a.createElement(h.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.a41d7a70.chunk.js.map